import{u as R}from"./habitStore-CrvRMhRn.js";import{_ as X,u as E,d as K,e as O,g as D,w as o,b as s,h as a,l as c,f as l,a as W,j as G,r as J,m as y,F as Q,t as r,p as Y,q as Z,o as w}from"./index-BO5ot4Aw.js";const ee={class:"d-flex justify-space-between align-center mb-8"},te={class:"d-flex justify-space-between align-start mb-4"},ae={class:"mb-4"},oe={class:"text-h6 font-weight-bold mb-1 text-on-surface"},se={class:"text-body-2 text-medium-emphasis text-truncate"},ne={class:"mb-4"},le={class:"d-flex justify-space-between text-caption"},ie={class:"font-weight-bold text-medium-emphasis"},de={class:"text-accent font-weight-bold"},re={class:"d-flex justify-space-between mb-6 text-caption text-medium-emphasis"},ce={class:"font-weight-bold text-on-surface"},ue={class:"text-right"},me={class:"font-weight-bold text-on-surface"},pe={class:"d-flex flex-column gap-4"},fe={class:"d-flex justify-space-between align-center"},ve={class:"text-h5 font-weight-bold text-primary"},_e={class:"d-flex justify-space-between align-center"},be={class:"text-h5 font-weight-bold text-success"},xe={__name:"HabitView",setup(ge){const p=R();E();const f=K(!1),i=K({title:"",description:"",xp:10,frequency:"Daily",icon:"mdi-circle"}),q=["Daily","Weekly"],j=["mdi-meditation","mdi-run","mdi-book-open-variant","mdi-water","mdi-bed","mdi-code-tags","mdi-dumbbell","mdi-food-apple"];O(()=>{});const v=n=>{if(!n.completedDates||n.completedDates.length===0)return!1;const e=new Date().setHours(0,0,0,0);return n.completedDates.some(d=>new Date(d).setHours(0,0,0,0)===e)},V=n=>{if(!n||n.length===0)return 0;const e=[...n].map(m=>new Date(m).setHours(0,0,0,0)).sort((m,b)=>b-m),d=[...new Set(e)],u=new Date().setHours(0,0,0,0),x=u-864e5;if(d[0]!==u&&d[0]!==x)return 0;let _=0,g=d[0];for(const m of d)if(m===g)_++,g-=864e5;else break;return _},k=n=>{if(!n.createdAt)return 0;const e=new Date(n.createdAt),u=Math.abs(new Date-e),x=Math.ceil(u/(1e3*60*60*24))||1,_=n.completedDates?n.completedDates.length:0;return Math.min(Math.round(_/x*100),100)},M=async()=>{i.value.title&&(i.value.icon==="mdi-circle"&&(i.value.icon=h(i.value)),await p.addHabit(i.value),i.value={title:"",description:"",xp:10,frequency:"Daily",icon:"mdi-circle"},f.value=!1)},U=async n=>{v(n)||await p.completeHabit(n.id)},h=n=>{if(n.icon&&n.icon!=="mdi-circle")return n.icon;const e=n.title.toLowerCase();return e.includes("water")?"mdi-water":e.includes("run")||e.includes("walk")?"mdi-run":e.includes("read")?"mdi-book-open-variant":e.includes("meditat")?"mdi-meditation":e.includes("sleep")?"mdi-bed":e.includes("code")?"mdi-code-tags":"mdi-checkbox-marked-circle"};return(n,e)=>{const d=l("v-btn"),u=l("v-icon"),x=l("v-avatar"),_=l("v-chip"),g=l("v-progress-linear"),m=l("v-card"),b=l("v-col"),C=l("v-row"),z=l("v-divider"),A=l("v-card-title"),H=l("v-text-field"),I=l("v-textarea"),S=l("v-select"),N=l("v-list-item"),P=l("v-card-text"),T=l("v-spacer"),$=l("v-card-actions"),F=l("v-dialog"),L=l("v-container");return w(),D(L,{fluid:"",class:"pa-6 bg-background h-100"},{default:o(()=>[s("div",ee,[e[10]||(e[10]=s("h1",{class:"text-h4 font-weight-bold"},"Dashboard Kebiasaan Strategis",-1)),a(d,{color:"primary","prepend-icon":"mdi-plus",height:"44",rounded:"lg",elevation:"2",onClick:e[0]||(e[0]=t=>f.value=!0)},{default:o(()=>[...e[9]||(e[9]=[c(" Kebiasaan Baru ",-1)])]),_:1})]),a(C,null,{default:o(()=>[a(b,{cols:"12",lg:"8"},{default:o(()=>[a(C,null,{default:o(()=>[(w(!0),W(Q,null,J(y(p).habits,t=>(w(),D(b,{key:t.id,cols:"12",sm:"6",md:"4"},{default:o(()=>[a(m,{class:"ocean-card pa-5 h-100 d-flex flex-column",elevation:"0"},{default:o(()=>[s("div",te,[a(x,{color:"primary",variant:"tonal",rounded:"lg",size:"56"},{default:o(()=>[a(u,{size:"32",color:"primary"},{default:o(()=>[c(r(h(t)),1)]),_:2},1024)]),_:2},1024),a(_,{size:"small",color:"surface-variant",variant:"flat",class:"font-weight-bold"},{default:o(()=>[c(r(t.frequency||"Daily"),1)]),_:2},1024)]),s("div",ae,[s("div",oe,r(t.title),1),s("div",se,r(t.description||"Terus semangat!"),1)]),s("div",ne,[a(g,{"model-value":k(t),color:"secondary",height:"8",rounded:"","bg-color":"surface-variant",class:"mb-2"},null,8,["model-value"]),s("div",le,[s("span",ie,r(k(t))+"% Selesai",1),s("span",de,[a(u,{size:"14",color:"accent",class:"mr-1"},{default:o(()=>[...e[11]||(e[11]=[c("mdi-fire",-1)])]),_:1}),c(" "+r(V(t.completedDates))+" hari streak ",1)])])]),s("div",re,[s("div",null,[s("div",ce,r(k(t))+"% ",1),e[12]||(e[12]=s("div",null,"Tingkat Penyelesaian",-1))]),s("div",ue,[s("div",me,r(V(t.completedDates))+" hari ",1),e[13]||(e[13]=s("div",null,"Streak Saat Ini",-1))])]),a(d,{block:"",height:"48",rounded:"lg",variant:"flat",color:v(t)?"success":"primary",disabled:v(t),onClick:B=>U(t),class:"mt-auto"},{default:o(()=>[a(u,{class:"mr-2"},{default:o(()=>[c(r(v(t)?"mdi-check":"mdi-plus"),1)]),_:2},1024),c(" "+r(v(t)?"Selesai Hari Ini!":`+${t.xp} XP`),1)]),_:2},1032,["color","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128)),y(p).habits.length===0?(w(),D(b,{key:0,cols:"12"},{default:o(()=>[a(m,{class:"ocean-card pa-12 text-center bg-surface-soft",elevation:"0"},{default:o(()=>[a(u,{size:"80",color:"medium-emphasis",class:"mb-4"},{default:o(()=>[...e[14]||(e[14]=[c("mdi-target",-1)])]),_:1}),e[16]||(e[16]=s("h3",{class:"text-h6 font-weight-bold mb-2 text-on-surface"}," Belum Ada Kebiasaan ",-1)),e[17]||(e[17]=s("p",{class:"text-body-2 text-medium-emphasis mb-6"}," Mulai bangun kebiasaan baru untuk meningkatkan produktivitas Anda ",-1)),a(d,{color:"primary","prepend-icon":"mdi-plus",rounded:"lg",elevation:"2",onClick:e[1]||(e[1]=t=>f.value=!0)},{default:o(()=>[...e[15]||(e[15]=[c(" Buat Kebiasaan Pertama ",-1)])]),_:1})]),_:1})]),_:1})):G("",!0)]),_:1})]),_:1}),a(b,{cols:"12",lg:"4"},{default:o(()=>[a(m,{class:"ocean-card pa-6 mb-4 bg-surface-soft",elevation:"0"},{default:o(()=>[e[20]||(e[20]=s("h3",{class:"text-h6 font-weight-bold mb-4"},"Statistik Kebiasaan",-1)),s("div",pe,[s("div",fe,[e[18]||(e[18]=s("span",{class:"text-body-2 text-medium-emphasis"},"Total Kebiasaan",-1)),s("span",ve,r(y(p).habits.length),1)]),a(z),s("div",_e,[e[19]||(e[19]=s("span",{class:"text-body-2 text-medium-emphasis"},"Selesai Hari Ini",-1)),s("span",be,r(y(p).habits.filter(v).length),1)])])]),_:1})]),_:1})]),_:1}),a(F,{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=t=>f.value=t),"max-width":"500"},{default:o(()=>[a(m,{class:"ocean-card pa-4"},{default:o(()=>[a(A,{class:"text-h5 font-weight-bold mb-4"},{default:o(()=>[...e[21]||(e[21]=[c(" Kebiasaan Baru ",-1)])]),_:1}),a(P,null,{default:o(()=>[a(H,{modelValue:i.value.title,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.title=t),label:"Nama Kebiasaan",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(I,{modelValue:i.value.description,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.description=t),label:"Deskripsi (Opsional)",variant:"outlined",rows:"3",class:"mb-2"},null,8,["modelValue"]),a(H,{modelValue:i.value.xp,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.xp=t),modelModifiers:{number:!0},label:"Nilai XP",type:"number",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(S,{modelValue:i.value.frequency,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.frequency=t),items:q,label:"Frekuensi",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(S,{modelValue:i.value.icon,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.icon=t),items:j,label:"Ikon",variant:"outlined",density:"comfortable"},{selection:o(({item:t})=>[a(u,{icon:t.value,class:"mr-2"},null,8,["icon"]),s("span",null,r(t.value),1)]),item:o(({item:t,props:B})=>[a(N,Y(Z(B)),{prepend:o(()=>[a(u,{icon:t.value},null,8,["icon"])]),_:2},1040)]),_:1},8,["modelValue"])]),_:1}),a($,null,{default:o(()=>[a(T),a(d,{variant:"text",onClick:e[7]||(e[7]=t=>f.value=!1)},{default:o(()=>[...e[22]||(e[22]=[c("Batal",-1)])]),_:1}),a(d,{color:"primary",variant:"flat",onClick:M},{default:o(()=>[...e[23]||(e[23]=[c(" Buat Kebiasaan ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ke=X(xe,[["__scopeId","data-v-c71a20b7"]]);export{ke as default};
