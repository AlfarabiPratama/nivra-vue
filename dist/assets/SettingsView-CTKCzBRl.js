import{u as A}from"./financeStore-DvD5CWmc.js";import{u as E}from"./habitStore-Bp9Knevj.js";import{u as M}from"./journalStore-BFIy2zyU.js";import{u as z}from"./todoStore-Do1tipFr.js";import{_ as J,Z as L,u as P,r as d,p as $,e as f,d as t,b as s,F as I,f as T,a as l,h as r,i as v,P as G,V as H,H as W,J as K,M as Y,N as Z,t as h,o as b,n as U,B as q,j as Q,g as X}from"./index-CaWm9mxH.js";import{V as ee}from"./VDialog-CqtD_Ddv.js";import{V as ae}from"./VSnackbar-DI_yesyR.js";import"./forwardRefs-Bi__BXdB.js";import"./dialog-transition-B-yByMG-.js";const te={class:"view-container"},oe={class:"card"},se={class:"themes-grid"},le=["onClick"],ne={key:0,class:"theme-check"},re={class:"theme-name"},ie={class:"card"},de={class:"setting-item"},ue={class:"nav-size-options"},ce=["onClick"],me={class:"card"},ve={class:"d-flex gap-3 flex-wrap"},pe={class:"card"},ge={class:"d-flex align-center mb-2"},fe={__name:"SettingsView",setup(be){const S=L(),w=P(),V=z(),y=E(),D=A(),x=M(),p=d("ocean"),k=d(5),C=d(null),u=d(!1),g=d(null),i=d({show:!1,message:"",color:"success"}),N=[{value:"ocean",label:"Ocean Mist",color:"#3B82F6"},{value:"forest",label:"Forest Whisper",color:"#2E7D32"},{value:"sunset",label:"Golden Hour",color:"#E64A19"},{value:"midnight",label:"Midnight",color:"#0F172A"}],_=a=>{p.value=a,S.global.name.value=a,localStorage.setItem("selectedTheme",a)},B=a=>{k.value=a,localStorage.setItem("bottomNavSize",a)},j=()=>{try{const a={version:"1.0",timestamp:new Date().toISOString(),user:w.getUserData(),todo:V.getUserData(),habit:y.getUserData(),finance:D.getUserData(),journal:x.getUserData()},e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),o=URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download=`nivra-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o),c("Backup berhasil diunduh!","success")}catch(a){console.error("Export error:",a),c("Gagal membuat backup.","error")}},R=()=>{C.value.click()},F=a=>{const e=a.target.files[0];if(!e)return;const o=new FileReader;o.onload=n=>{try{const m=JSON.parse(n.target.result);if(!m.user||!m.todo)throw new Error("Format file tidak valid");g.value=m,u.value=!0}catch(m){console.error("Import error:",m),c("File backup tidak valid.","error")}a.target.value=""},o.readAsText(e)},O=()=>{if(g.value)try{const a=g.value;w.loadUserData(a.user),V.loadUserData(a.todo),y.loadUserData(a.habit),D.loadUserData(a.finance),x.loadUserData(a.journal),c("Data berhasil dipulihkan!","success"),u.value=!1,g.value=null}catch(a){console.error("Restore error:",a),c("Gagal memulihkan data.","error")}},c=(a,e="success")=>{i.value={show:!0,message:a,color:e}};return $(()=>{const a=localStorage.getItem("selectedTheme");a&&(p.value=a,S.global.name.value=a);const e=localStorage.getItem("bottomNavSize");e&&(k.value=parseInt(e))}),(a,e)=>(b(),f("div",te,[e[19]||(e[19]=t("h2",null,"Pengaturan",-1)),t("div",oe,[e[4]||(e[4]=t("h3",null,"Tampilan & Tema",-1)),t("div",se,[(b(),f(I,null,T(N,o=>t("div",{key:o.value,class:U(["theme-option",{active:p.value===o.value}]),onClick:n=>_(o.value)},[t("div",{class:"theme-preview",style:q({background:o.color})},[p.value===o.value?(b(),f("div",ne,[s(X,{icon:"mdi-check",color:"white"})])):Q("",!0)],4),t("span",re,h(o.label),1)],10,le)),64))])]),t("div",ie,[e[6]||(e[6]=t("h3",null,"Navigasi",-1)),t("div",de,[e[5]||(e[5]=t("label",{class:"setting-label"},[t("span",null,"Item Navigasi Bawah (Mobile)")],-1)),t("div",ue,[(b(),f(I,null,T([4,5,6],o=>t("button",{key:o,class:U(["size-btn",{active:k.value===o}]),onClick:n=>B(o)},h(o)+" item ",11,ce)),64))])])]),t("div",me,[e[9]||(e[9]=t("h3",null,"Manajemen Data",-1)),e[10]||(e[10]=t("p",{class:"setting-desc mb-4"}," Simpan data Anda secara lokal atau pindahkan ke perangkat lain. ",-1)),t("div",ve,[s(v,{color:"primary","prepend-icon":"mdi-download",variant:"flat",onClick:j},{default:l(()=>[...e[7]||(e[7]=[r(" Backup Data (JSON) ",-1)])]),_:1}),s(v,{color:"secondary","prepend-icon":"mdi-upload",variant:"tonal",onClick:R},{default:l(()=>[...e[8]||(e[8]=[r(" Restore Data ",-1)])]),_:1}),t("input",{type:"file",ref_key:"fileInput",ref:C,accept:".json",style:{display:"none"},onChange:F},null,544)])]),t("div",pe,[e[12]||(e[12]=t("h3",null,"Tentang",-1)),t("div",ge,[s(G,{src:"/icons/icon-192x192.png",width:"48",height:"48",class:"mr-3 rounded-lg"}),e[11]||(e[11]=t("div",null,[t("h4",{class:"text-h6 font-weight-bold"},"Nivra"),t("p",{class:"text-caption text-medium-emphasis"}," PWA Produktivitas Pribadi v0.1.0 ")],-1))]),e[13]||(e[13]=t("p",{class:"text-body-2 text-medium-emphasis mt-2"}," Dibuat dengan ❤️ menggunakan Vue 3 & Vuetify. ",-1))]),s(ee,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),"max-width":"400"},{default:l(()=>[s(H,null,{default:l(()=>[s(W,{class:"text-h5 font-weight-bold"},{default:l(()=>[...e[14]||(e[14]=[r("Konfirmasi Restore",-1)])]),_:1}),s(K,null,{default:l(()=>[...e[15]||(e[15]=[r(" Tindakan ini akan ",-1),t("strong",null,"menimpa",-1),r(" semua data yang ada saat ini dengan data dari file backup. Apakah Anda yakin ingin melanjutkan? ",-1)])]),_:1}),s(Y,null,{default:l(()=>[s(Z),s(v,{variant:"text",onClick:e[0]||(e[0]=o=>u.value=!1)},{default:l(()=>[...e[16]||(e[16]=[r("Batal",-1)])]),_:1}),s(v,{color:"error",variant:"flat",onClick:O},{default:l(()=>[...e[17]||(e[17]=[r("Ya, Restore Data",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ae,{modelValue:i.value.show,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.show=o),color:i.value.color,timeout:"3000"},{actions:l(()=>[s(v,{variant:"text",onClick:e[2]||(e[2]=o=>i.value.show=!1)},{default:l(()=>[...e[18]||(e[18]=[r("Tutup",-1)])]),_:1})]),default:l(()=>[r(h(i.value.message)+" ",1)]),_:1},8,["modelValue","color"])]))}},Ie=J(fe,[["__scopeId","data-v-eca9b8af"]]);export{Ie as default};
