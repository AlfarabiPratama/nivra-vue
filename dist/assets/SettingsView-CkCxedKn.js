import{u as H}from"./financeStore-B_3xezc-.js";import{u as W}from"./habitStore-CrvRMhRn.js";import{u as K}from"./journalStore-CkzrgThM.js";import{u as Y}from"./todoStore-uEZ3XYxQ.js";import{_ as q,G as Q,u as X,d as m,e as Z,a as b,b as a,h as n,F as I,r as T,w as l,l as i,f as r,t as h,o as k,i as V,n as ee,j as te}from"./index-BO5ot4Aw.js";const ae={class:"view-container"},oe={class:"card"},ne={class:"themes-grid"},se=["onClick"],le={key:0,class:"theme-check"},re={class:"theme-name"},ie={class:"card"},de={class:"setting-item"},ue={class:"nav-size-options"},ce=["onClick"],me={class:"card"},ve={class:"d-flex gap-3 flex-wrap"},pe={class:"card"},ge={class:"d-flex align-center mb-2"},fe={__name:"SettingsView",setup(be){const S=Q(),w=X(),x=Y(),y=W(),D=H(),U=K(),g=m("ocean"),_=m(5),C=m(null),v=m(!1),f=m(null),c=m({show:!1,message:"",color:"success"}),N=[{value:"ocean",label:"Ocean Mist",color:"#3B82F6"},{value:"forest",label:"Forest Whisper",color:"#2E7D32"},{value:"sunset",label:"Golden Hour",color:"#E64A19"},{value:"midnight",label:"Midnight",color:"#0F172A"}],j=t=>{g.value=t,S.global.name.value=t,localStorage.setItem("selectedTheme",t)},R=t=>{_.value=t,localStorage.setItem("bottomNavSize",t)},B=()=>{try{const t={version:"1.0",timestamp:new Date().toISOString(),user:w.getUserData(),todo:x.getUserData(),habit:y.getUserData(),finance:D.getUserData(),journal:U.getUserData()},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),d=URL.createObjectURL(e),s=document.createElement("a");s.href=d,s.download=`nivra-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(d),p("Backup berhasil diunduh!","success")}catch(t){console.error("Export error:",t),p("Gagal membuat backup.","error")}},F=()=>{C.value.click()},O=t=>{const e=t.target.files[0];if(!e)return;const d=new FileReader;d.onload=s=>{try{const u=JSON.parse(s.target.result);if(!u.user||!u.todo)throw new Error("Format file tidak valid");f.value=u,v.value=!0}catch(u){console.error("Import error:",u),p("File backup tidak valid.","error")}t.target.value=""},d.readAsText(e)},A=()=>{if(f.value)try{const t=f.value;w.loadUserData(t.user),x.loadUserData(t.todo),y.loadUserData(t.habit),D.loadUserData(t.finance),U.loadUserData(t.journal),p("Data berhasil dipulihkan!","success"),v.value=!1,f.value=null}catch(t){console.error("Restore error:",t),p("Gagal memulihkan data.","error")}},p=(t,e="success")=>{c.value={show:!0,message:t,color:e}};return Z(()=>{const t=localStorage.getItem("selectedTheme");t&&(g.value=t,S.global.name.value=t);const e=localStorage.getItem("bottomNavSize");e&&(_.value=parseInt(e))}),(t,e)=>{const d=r("v-icon"),s=r("v-btn"),u=r("v-img"),E=r("v-card-title"),z=r("v-card-text"),L=r("v-spacer"),M=r("v-card-actions"),$=r("v-card"),G=r("v-dialog"),J=r("v-snackbar");return k(),b("div",ae,[e[19]||(e[19]=a("h2",null,"Pengaturan",-1)),a("div",oe,[e[4]||(e[4]=a("h3",null,"Tampilan & Tema",-1)),a("div",ne,[(k(),b(I,null,T(N,o=>a("div",{key:o.value,class:V(["theme-option",{active:g.value===o.value}]),onClick:P=>j(o.value)},[a("div",{class:"theme-preview",style:ee({background:o.color})},[g.value===o.value?(k(),b("div",le,[n(d,{icon:"mdi-check",color:"white"})])):te("",!0)],4),a("span",re,h(o.label),1)],10,se)),64))])]),a("div",ie,[e[6]||(e[6]=a("h3",null,"Navigasi",-1)),a("div",de,[e[5]||(e[5]=a("label",{class:"setting-label"},[a("span",null,"Item Navigasi Bawah (Mobile)")],-1)),a("div",ue,[(k(),b(I,null,T([4,5,6],o=>a("button",{key:o,class:V(["size-btn",{active:_.value===o}]),onClick:P=>R(o)},h(o)+" item ",11,ce)),64))])])]),a("div",me,[e[9]||(e[9]=a("h3",null,"Manajemen Data",-1)),e[10]||(e[10]=a("p",{class:"setting-desc mb-4"}," Simpan data Anda secara lokal atau pindahkan ke perangkat lain. ",-1)),a("div",ve,[n(s,{color:"primary","prepend-icon":"mdi-download",variant:"flat",onClick:B},{default:l(()=>[...e[7]||(e[7]=[i(" Backup Data (JSON) ",-1)])]),_:1}),n(s,{color:"secondary","prepend-icon":"mdi-upload",variant:"tonal",onClick:F},{default:l(()=>[...e[8]||(e[8]=[i(" Restore Data ",-1)])]),_:1}),a("input",{type:"file",ref_key:"fileInput",ref:C,accept:".json",style:{display:"none"},onChange:O},null,544)])]),a("div",pe,[e[12]||(e[12]=a("h3",null,"Tentang",-1)),a("div",ge,[n(u,{src:"/icons/icon-192x192.png",width:"48",height:"48",class:"mr-3 rounded-lg"}),e[11]||(e[11]=a("div",null,[a("h4",{class:"text-h6 font-weight-bold"},"Nivra"),a("p",{class:"text-caption text-medium-emphasis"}," PWA Produktivitas Pribadi v0.1.0 ")],-1))]),e[13]||(e[13]=a("p",{class:"text-body-2 text-medium-emphasis mt-2"}," Dibuat dengan ❤️ menggunakan Vue 3 & Vuetify. ",-1))]),n(G,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),"max-width":"400"},{default:l(()=>[n($,null,{default:l(()=>[n(E,{class:"text-h5 font-weight-bold"},{default:l(()=>[...e[14]||(e[14]=[i("Konfirmasi Restore",-1)])]),_:1}),n(z,null,{default:l(()=>[...e[15]||(e[15]=[i(" Tindakan ini akan ",-1),a("strong",null,"menimpa",-1),i(" semua data yang ada saat ini dengan data dari file backup. Apakah Anda yakin ingin melanjutkan? ",-1)])]),_:1}),n(M,null,{default:l(()=>[n(L),n(s,{variant:"text",onClick:e[0]||(e[0]=o=>v.value=!1)},{default:l(()=>[...e[16]||(e[16]=[i("Batal",-1)])]),_:1}),n(s,{color:"error",variant:"flat",onClick:A},{default:l(()=>[...e[17]||(e[17]=[i("Ya, Restore Data",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(J,{modelValue:c.value.show,"onUpdate:modelValue":e[3]||(e[3]=o=>c.value.show=o),color:c.value.color,timeout:"3000"},{actions:l(()=>[n(s,{variant:"text",onClick:e[2]||(e[2]=o=>c.value.show=!1)},{default:l(()=>[...e[18]||(e[18]=[i("Tutup",-1)])]),_:1})]),default:l(()=>[i(h(c.value.message)+" ",1)]),_:1},8,["modelValue","color"])])}}},xe=q(fe,[["__scopeId","data-v-eca9b8af"]]);export{xe as default};
