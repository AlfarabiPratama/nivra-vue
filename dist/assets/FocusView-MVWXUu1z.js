import{M as B,d as v,h as I,K as M,$ as T,y as l,n as s,_ as u,a1 as w,U as p,u as i,F,a0 as z,q as A,a2 as V}from"./vendor-Cz5JWIRj.js";import{u as P,_ as D,b as k,c as K,V as g,a as C}from"./index-BsOJLOR7.js";import{u as L}from"./todoStore-CA0FHbko.js";import{V as R}from"./VChip-C6BNHS__.js";import{V as j,a as q}from"./VRow-CUGOhnXi.js";import{V as E}from"./VSelect-D8_JCvIh.js";import"./vuetify-DcJZCtkX.js";import"./VTextField-Ded26RPi.js";const H=B("focus",()=>{const r=v(1500),e=v(!1),d=v("focus"),m=v(null),c=v(0);let f=null;const b=I(()=>{const t=Math.floor(r.value/60),$=r.value%60;return`${t.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`}),_=I(()=>{const t=d.value==="focus"?1500:d.value==="short-break"?300:900;return(t-r.value)/t*100});function h(t){switch(d.value=t,e.value=!1,clearInterval(f),t){case"focus":r.value=25*60;break;case"short-break":r.value=5*60;break;case"long-break":r.value=15*60;break}}function S(){e.value?n():x()}function x(){e.value||(e.value=!0,f=setInterval(()=>{r.value>0?r.value--:a()},1e3))}function n(){e.value=!1,clearInterval(f)}function o(){n(),h(d.value)}function a(){if(n(),d.value==="focus"){c.value++;const t=P();t.addXP(50),t.showNotification("Sesi Fokus Selesai! Istirahatlah sejenak.")}else P().showNotification("Istirahat Selesai! Kembali bekerja?")}function y(t){m.value=t}function U(){return{totalSessions:c.value}}function N(t){t&&t.totalSessions&&(c.value=t.totalSessions)}return{timeLeft:r,isActive:e,mode:d,selectedTaskId:m,totalSessions:c,formattedTime:b,progress:_,setMode:h,toggleTimer:S,resetTimer:o,selectTask:y,getUserData:U,loadUserData:N}},{persist:{paths:["mode","selectedTaskId","totalSessions"]}}),X={class:"view-container h-100 d-flex flex-column"},G={class:"d-flex justify-space-between align-center mb-6"},J={class:"d-flex gap-2 mb-8 z-10"},O={class:"timer-container mb-8 z-10"},Q={class:"text-center"},W={class:"text-display-2 font-weight-black tracking-tight"},Y={class:"text-body-1 font-weight-medium text-medium-emphasis mt-2"},Z={class:"d-flex gap-4 z-10"},ee={class:"d-flex align-center mb-2"},ae={class:"d-flex align-center mb-2"},se={class:"d-flex gap-2"},te={__name:"FocusView",setup(r){const e=H(),d=L(),m=v(null),c=v(null),f=v(null),b=[{label:"Fokus",value:"focus"},{label:"Istirahat Pendek",value:"short-break"},{label:"Istirahat Panjang",value:"long-break"}],_=[{id:"rain",label:"Hujan",icon:"mdi-weather-pouring"},{id:"cafe",label:"Kafe",icon:"mdi-coffee"}],h=I(()=>{if(!e.selectedTaskId)return null;const n=d.tasks.find(o=>o.id===e.selectedTaskId);return n?n.title:null}),S=n=>{m.value.pause(),c.value.pause(),f.value===n?f.value=null:(f.value=n,n==="rain"&&m.value.play(),n==="cafe"&&c.value.play())},x=()=>{e.resetTimer()};return M(()=>{m.value&&m.value.pause(),c.value&&c.value.pause()}),(n,o)=>(V(),T("div",X,[l("div",G,[o[1]||(o[1]=l("h2",{class:"text-h4 font-weight-bold"},"Mode Fokus",-1)),s(R,{color:"primary",variant:"flat",class:"font-weight-bold"},{default:u(()=>[s(k,{start:"",icon:"mdi-fire"}),w(" "+p(i(e).totalSessions)+" Sesi Selesai ",1)]),_:1})]),s(C,{class:A(["ocean-card flex-grow-1 d-flex flex-column align-center justify-center relative overflow-hidden pa-6 mb-6",{"pulse-bg":i(e).isActive}])},{default:u(()=>[o[2]||(o[2]=l("div",{class:"absolute-bg-circle"},null,-1)),l("div",J,[(V(),T(F,null,z(b,a=>s(g,{key:a.value,variant:i(e).mode===a.value?"flat":"text",color:i(e).mode===a.value?"primary":"medium-emphasis",rounded:"pill",onClick:y=>i(e).setMode(a.value)},{default:u(()=>[w(p(a.label),1)]),_:2},1032,["variant","color","onClick"])),64))]),l("div",O,[s(K,{"model-value":i(e).progress,size:280,width:12,color:"primary","bg-color":"rgba(var(--v-theme-primary), 0.1)",class:"drop-shadow-lg"},{default:u(()=>[l("div",Q,[l("div",W,p(i(e).formattedTime),1),l("div",Y,p(h.value||"Pilih tugas untuk fokus"),1)])]),_:1},8,["model-value"])]),l("div",Z,[s(g,{icon:"mdi-refresh",variant:"tonal",color:"medium-emphasis",size:"large",onClick:i(e).resetTimer},null,8,["onClick"]),s(g,{icon:i(e).isActive?"mdi-pause":"mdi-play",color:"primary",size:"x-large",elevation:"4",class:"play-btn",onClick:i(e).toggleTimer},null,8,["icon","onClick"]),s(g,{icon:"mdi-skip-next",variant:"tonal",color:"medium-emphasis",size:"large",onClick:x})])]),_:1},8,["class"]),s(q,null,{default:u(()=>[s(j,{cols:"12",md:"6"},{default:u(()=>[s(C,{class:"ocean-card pa-4 h-100"},{default:u(()=>[l("div",ee,[s(k,{icon:"mdi-checkbox-marked-circle-outline",class:"mr-2",color:"primary"}),o[3]||(o[3]=l("span",{class:"font-weight-bold"},"Fokus Pada",-1))]),s(E,{modelValue:i(e).selectedTaskId,"onUpdate:modelValue":o[0]||(o[0]=a=>i(e).selectedTaskId=a),items:i(d).tasks.filter(a=>!a.completed),"item-title":"title","item-value":"id",label:"Pilih Tugas",variant:"outlined",density:"comfortable","hide-details":"",placeholder:"Tanpa tugas spesifik",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(j,{cols:"12",md:"6"},{default:u(()=>[s(C,{class:"ocean-card pa-4 h-100"},{default:u(()=>[l("div",ae,[s(k,{icon:"mdi-headphones",class:"mr-2",color:"secondary"}),o[4]||(o[4]=l("span",{class:"font-weight-bold"},"Suara Latar",-1))]),l("div",se,[(V(),T(F,null,z(_,a=>s(g,{key:a.id,variant:f.value===a.id?"flat":"outlined",color:f.value===a.id?"secondary":"medium-emphasis",class:"flex-grow-1",onClick:y=>S(a.id)},{default:u(()=>[s(k,{icon:a.icon,class:"mr-1"},null,8,["icon"]),w(" "+p(a.label),1)]),_:2},1032,["variant","color","onClick"])),64))])]),_:1})]),_:1})]),_:1}),l("audio",{ref_key:"audioRain",ref:m,loop:"",src:"https://actions.google.com/sounds/v1/weather/rain_heavy_loud.ogg"},null,512),l("audio",{ref_key:"audioCafe",ref:c,loop:"",src:"https://actions.google.com/sounds/v1/ambiences/coffee_shop.ogg"},null,512)]))}},fe=D(te,[["__scopeId","data-v-53e2987a"]]);export{fe as default};
