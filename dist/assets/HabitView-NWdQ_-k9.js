import{u as q}from"./habitStore-Bp9Knevj.js";import{_ as N,u as P,r as S,p as U,c as _,a as s,d as l,b as a,h as d,i as v,e as z,j as L,f as $,s as x,F,V as g,g as f,t as n,G as R,H as X,J as E,C as G,K as J,L as O,M as W,N as Q,o as V,k as Y,y as Z}from"./index-CaWm9mxH.js";import{V as y,a as h}from"./VRow-DBbWNSlZ.js";import{V as B}from"./VTextField-ngYOOfdz.js";import{V as ee}from"./VTextarea-DKQwlwYC.js";import{V as K}from"./VSelect-ybdDrsdq.js";import{V as te}from"./VDialog-CqtD_Ddv.js";import{V as ae}from"./VContainer-DhN86Pgz.js";import{V as se}from"./VChip-DarLv345.js";import"./forwardRefs-Bi__BXdB.js";import"./dialog-transition-B-yByMG-.js";const le={class:"d-flex justify-space-between align-center mb-8"},oe={class:"d-flex justify-space-between align-start mb-4"},ie={class:"mb-4"},ne={class:"text-h6 font-weight-bold mb-1 text-on-surface"},de={class:"text-body-2 text-medium-emphasis text-truncate"},re={class:"mb-4"},ue={class:"d-flex justify-space-between text-caption"},me={class:"font-weight-bold text-medium-emphasis"},ce={class:"text-accent font-weight-bold"},fe={class:"d-flex justify-space-between mb-6 text-caption text-medium-emphasis"},pe={class:"font-weight-bold text-on-surface"},ve={class:"text-right"},be={class:"font-weight-bold text-on-surface"},xe={class:"d-flex flex-column gap-4"},ge={class:"d-flex justify-space-between align-center"},Ve={class:"text-h5 font-weight-bold text-primary"},ye={class:"d-flex justify-space-between align-center"},we={class:"text-h5 font-weight-bold text-success"},ke={__name:"HabitView",setup(_e){const u=q();P();const m=S(!1),i=S({title:"",description:"",xp:10,frequency:"Daily",icon:"mdi-circle"}),T=["Daily","Weekly"],A=["mdi-meditation","mdi-run","mdi-book-open-variant","mdi-water","mdi-bed","mdi-code-tags","mdi-dumbbell","mdi-food-apple"];U(()=>{});const c=o=>{if(!o.completedDates||o.completedDates.length===0)return!1;const e=new Date().setHours(0,0,0,0);return o.completedDates.some(t=>new Date(t).setHours(0,0,0,0)===e)},D=o=>{if(!o||o.length===0)return 0;const e=[...o].map(p=>new Date(p).setHours(0,0,0,0)).sort((p,j)=>j-p),t=[...new Set(e)],r=new Date().setHours(0,0,0,0),k=r-864e5;if(t[0]!==r&&t[0]!==k)return 0;let b=0,H=t[0];for(const p of t)if(p===H)b++,H-=864e5;else break;return b},w=o=>{if(!o.createdAt)return 0;const e=new Date(o.createdAt),r=Math.abs(new Date-e),k=Math.ceil(r/(1e3*60*60*24))||1,b=o.completedDates?o.completedDates.length:0;return Math.min(Math.round(b/k*100),100)},I=async()=>{i.value.title&&(i.value.icon==="mdi-circle"&&(i.value.icon=C(i.value)),await u.addHabit(i.value),i.value={title:"",description:"",xp:10,frequency:"Daily",icon:"mdi-circle"},m.value=!1)},M=async o=>{c(o)||await u.completeHabit(o.id)},C=o=>{if(o.icon&&o.icon!=="mdi-circle")return o.icon;const e=o.title.toLowerCase();return e.includes("water")?"mdi-water":e.includes("run")||e.includes("walk")?"mdi-run":e.includes("read")?"mdi-book-open-variant":e.includes("meditat")?"mdi-meditation":e.includes("sleep")?"mdi-bed":e.includes("code")?"mdi-code-tags":"mdi-checkbox-marked-circle"};return(o,e)=>(V(),_(ae,{fluid:"",class:"pa-6 bg-background h-100"},{default:s(()=>[l("div",le,[e[10]||(e[10]=l("h1",{class:"text-h4 font-weight-bold"},"Dashboard Kebiasaan Strategis",-1)),a(v,{color:"primary","prepend-icon":"mdi-plus",height:"44",rounded:"lg",elevation:"2",onClick:e[0]||(e[0]=t=>m.value=!0)},{default:s(()=>[...e[9]||(e[9]=[d(" Kebiasaan Baru ",-1)])]),_:1})]),a(h,null,{default:s(()=>[a(y,{cols:"12",lg:"8"},{default:s(()=>[a(h,null,{default:s(()=>[(V(!0),z(F,null,$(x(u).habits,t=>(V(),_(y,{key:t.id,cols:"12",sm:"6",md:"4"},{default:s(()=>[a(g,{class:"ocean-card pa-5 h-100 d-flex flex-column",elevation:"0"},{default:s(()=>[l("div",oe,[a(Y,{color:"primary",variant:"tonal",rounded:"lg",size:"56"},{default:s(()=>[a(f,{size:"32",color:"primary"},{default:s(()=>[d(n(C(t)),1)]),_:2},1024)]),_:2},1024),a(se,{size:"small",color:"surface-variant",variant:"flat",class:"font-weight-bold"},{default:s(()=>[d(n(t.frequency||"Daily"),1)]),_:2},1024)]),l("div",ie,[l("div",ne,n(t.title),1),l("div",de,n(t.description||"Terus semangat!"),1)]),l("div",re,[a(Z,{"model-value":w(t),color:"secondary",height:"8",rounded:"","bg-color":"surface-variant",class:"mb-2"},null,8,["model-value"]),l("div",ue,[l("span",me,n(w(t))+"% Selesai",1),l("span",ce,[a(f,{size:"14",color:"accent",class:"mr-1"},{default:s(()=>[...e[11]||(e[11]=[d("mdi-fire",-1)])]),_:1}),d(" "+n(D(t.completedDates))+" hari streak ",1)])])]),l("div",fe,[l("div",null,[l("div",pe,n(w(t))+"% ",1),e[12]||(e[12]=l("div",null,"Tingkat Penyelesaian",-1))]),l("div",ve,[l("div",be,n(D(t.completedDates))+" hari ",1),e[13]||(e[13]=l("div",null,"Streak Saat Ini",-1))])]),a(v,{block:"",height:"48",rounded:"lg",variant:"flat",color:c(t)?"success":"primary",disabled:c(t),onClick:r=>M(t),class:"mt-auto"},{default:s(()=>[a(f,{class:"mr-2"},{default:s(()=>[d(n(c(t)?"mdi-check":"mdi-plus"),1)]),_:2},1024),d(" "+n(c(t)?"Selesai Hari Ini!":`+${t.xp} XP`),1)]),_:2},1032,["color","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128)),x(u).habits.length===0?(V(),_(y,{key:0,cols:"12"},{default:s(()=>[a(g,{class:"ocean-card pa-12 text-center bg-surface-soft",elevation:"0"},{default:s(()=>[a(f,{size:"80",color:"medium-emphasis",class:"mb-4"},{default:s(()=>[...e[14]||(e[14]=[d("mdi-target",-1)])]),_:1}),e[16]||(e[16]=l("h3",{class:"text-h6 font-weight-bold mb-2 text-on-surface"}," Belum Ada Kebiasaan ",-1)),e[17]||(e[17]=l("p",{class:"text-body-2 text-medium-emphasis mb-6"}," Mulai bangun kebiasaan baru untuk meningkatkan produktivitas Anda ",-1)),a(v,{color:"primary","prepend-icon":"mdi-plus",rounded:"lg",elevation:"2",onClick:e[1]||(e[1]=t=>m.value=!0)},{default:s(()=>[...e[15]||(e[15]=[d(" Buat Kebiasaan Pertama ",-1)])]),_:1})]),_:1})]),_:1})):L("",!0)]),_:1})]),_:1}),a(y,{cols:"12",lg:"4"},{default:s(()=>[a(g,{class:"ocean-card pa-6 mb-4 bg-surface-soft",elevation:"0"},{default:s(()=>[e[20]||(e[20]=l("h3",{class:"text-h6 font-weight-bold mb-4"},"Statistik Kebiasaan",-1)),l("div",xe,[l("div",ge,[e[18]||(e[18]=l("span",{class:"text-body-2 text-medium-emphasis"},"Total Kebiasaan",-1)),l("span",Ve,n(x(u).habits.length),1)]),a(R),l("div",ye,[e[19]||(e[19]=l("span",{class:"text-body-2 text-medium-emphasis"},"Selesai Hari Ini",-1)),l("span",we,n(x(u).habits.filter(c).length),1)])])]),_:1})]),_:1})]),_:1}),a(te,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=t=>m.value=t),"max-width":"500"},{default:s(()=>[a(g,{class:"ocean-card pa-4"},{default:s(()=>[a(X,{class:"text-h5 font-weight-bold mb-4"},{default:s(()=>[...e[21]||(e[21]=[d(" Kebiasaan Baru ",-1)])]),_:1}),a(E,null,{default:s(()=>[a(B,{modelValue:i.value.title,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.title=t),label:"Nama Kebiasaan",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(ee,{modelValue:i.value.description,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.description=t),label:"Deskripsi (Opsional)",variant:"outlined",rows:"3",class:"mb-2"},null,8,["modelValue"]),a(B,{modelValue:i.value.xp,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.xp=t),modelModifiers:{number:!0},label:"Nilai XP",type:"number",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(K,{modelValue:i.value.frequency,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.frequency=t),items:T,label:"Frekuensi",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(K,{modelValue:i.value.icon,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.icon=t),items:A,label:"Ikon",variant:"outlined",density:"comfortable"},{selection:s(({item:t})=>[a(f,{icon:t.value,class:"mr-2"},null,8,["icon"]),l("span",null,n(t.value),1)]),item:s(({item:t,props:r})=>[a(G,J(O(r)),{prepend:s(()=>[a(f,{icon:t.value},null,8,["icon"])]),_:2},1040)]),_:1},8,["modelValue"])]),_:1}),a(W,null,{default:s(()=>[a(Q),a(v,{variant:"text",onClick:e[7]||(e[7]=t=>m.value=!1)},{default:s(()=>[...e[22]||(e[22]=[d("Batal",-1)])]),_:1}),a(v,{color:"primary",variant:"flat",onClick:I},{default:s(()=>[...e[23]||(e[23]=[d(" Buat Kebiasaan ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},je=N(ke,[["__scopeId","data-v-c71a20b7"]]);export{je as default};
