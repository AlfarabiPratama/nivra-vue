import{u as M}from"./habitStore-B5zgwvLo.js";import{_ as P,u as j,V as b,a as x,b as f,k as z,l as N,m as $,h as F,n as L,o as R,p as X,e as E,g as O}from"./index-BsOJLOR7.js";import{V as g,a as H}from"./VRow-CUGOhnXi.js";import{V as h}from"./VTextField-Ded26RPi.js";import{V as W}from"./VTextarea-Bcl2fzYd.js";import{V as B}from"./VSelect-D8_JCvIh.js";import{d as T,D as Z,Z as _,_ as s,y as l,n as a,a1 as d,$ as G,a3 as J,a0 as Q,u as V,F as Y,U as n,aa as ee,ab as te,a2 as y}from"./vendor-Cz5JWIRj.js";import{V as ae}from"./VContainer-BRwFRapj.js";import{V as se}from"./VChip-C6BNHS__.js";import"./vuetify-DcJZCtkX.js";const le={class:"d-flex justify-space-between align-center mb-8"},oe={class:"d-flex justify-space-between align-start mb-4"},ie={class:"mb-4"},ne={class:"text-h6 font-weight-bold mb-1 text-on-surface"},de={class:"text-body-2 text-medium-emphasis text-truncate"},re={class:"mb-4"},ue={class:"d-flex justify-space-between text-caption"},me={class:"font-weight-bold text-medium-emphasis"},ce={class:"text-accent font-weight-bold"},fe={class:"d-flex justify-space-between mb-6 text-caption text-medium-emphasis"},pe={class:"font-weight-bold text-on-surface"},be={class:"text-right"},ve={class:"font-weight-bold text-on-surface"},xe={class:"d-flex flex-column gap-4"},ge={class:"d-flex justify-space-between align-center"},Ve={class:"text-h5 font-weight-bold text-primary"},ye={class:"d-flex justify-space-between align-center"},we={class:"text-h5 font-weight-bold text-success"},ke={__name:"HabitView",setup(_e){const u=M();j();const m=T(!1),i=T({title:"",description:"",xp:10,frequency:"Daily",icon:"mdi-circle"}),K=["Daily","Weekly"],A=["mdi-meditation","mdi-run","mdi-book-open-variant","mdi-water","mdi-bed","mdi-code-tags","mdi-dumbbell","mdi-food-apple"];Z(()=>{});const c=o=>{if(!o.completedDates||o.completedDates.length===0)return!1;const e=new Date().setHours(0,0,0,0);return o.completedDates.some(t=>new Date(t).setHours(0,0,0,0)===e)},D=o=>{if(!o||o.length===0)return 0;const e=[...o].map(p=>new Date(p).setHours(0,0,0,0)).sort((p,q)=>q-p),t=[...new Set(e)],r=new Date().setHours(0,0,0,0),k=r-864e5;if(t[0]!==r&&t[0]!==k)return 0;let v=0,S=t[0];for(const p of t)if(p===S)v++,S-=864e5;else break;return v},w=o=>{if(!o.createdAt)return 0;const e=new Date(o.createdAt),r=Math.abs(new Date-e),k=Math.ceil(r/(1e3*60*60*24))||1,v=o.completedDates?o.completedDates.length:0;return Math.min(Math.round(v/k*100),100)},I=async()=>{i.value.title&&(i.value.icon==="mdi-circle"&&(i.value.icon=C(i.value)),await u.addHabit(i.value),i.value={title:"",description:"",xp:10,frequency:"Daily",icon:"mdi-circle"},m.value=!1)},U=async o=>{c(o)||await u.completeHabit(o.id)},C=o=>{if(o.icon&&o.icon!=="mdi-circle")return o.icon;const e=o.title.toLowerCase();return e.includes("water")?"mdi-water":e.includes("run")||e.includes("walk")?"mdi-run":e.includes("read")?"mdi-book-open-variant":e.includes("meditat")?"mdi-meditation":e.includes("sleep")?"mdi-bed":e.includes("code")?"mdi-code-tags":"mdi-checkbox-marked-circle"};return(o,e)=>(y(),_(ae,{fluid:"",class:"pa-6 bg-background h-100"},{default:s(()=>[l("div",le,[e[10]||(e[10]=l("h1",{class:"text-h4 font-weight-bold"},"Dashboard Kebiasaan Strategis",-1)),a(b,{color:"primary","prepend-icon":"mdi-plus",height:"44",rounded:"lg",elevation:"2",onClick:e[0]||(e[0]=t=>m.value=!0)},{default:s(()=>[...e[9]||(e[9]=[d(" Kebiasaan Baru ",-1)])]),_:1})]),a(H,null,{default:s(()=>[a(g,{cols:"12",lg:"8"},{default:s(()=>[a(H,null,{default:s(()=>[(y(!0),G(Y,null,Q(V(u).habits,t=>(y(),_(g,{key:t.id,cols:"12",sm:"6",md:"4"},{default:s(()=>[a(x,{class:"ocean-card pa-5 h-100 d-flex flex-column",elevation:"0"},{default:s(()=>[l("div",oe,[a(E,{color:"primary",variant:"tonal",rounded:"lg",size:"56"},{default:s(()=>[a(f,{size:"32",color:"primary"},{default:s(()=>[d(n(C(t)),1)]),_:2},1024)]),_:2},1024),a(se,{size:"small",color:"surface-variant",variant:"flat",class:"font-weight-bold"},{default:s(()=>[d(n(t.frequency||"Daily"),1)]),_:2},1024)]),l("div",ie,[l("div",ne,n(t.title),1),l("div",de,n(t.description||"Terus semangat!"),1)]),l("div",re,[a(O,{"model-value":w(t),color:"secondary",height:"8",rounded:"","bg-color":"surface-variant",class:"mb-2"},null,8,["model-value"]),l("div",ue,[l("span",me,n(w(t))+"% Selesai",1),l("span",ce,[a(f,{size:"14",color:"accent",class:"mr-1"},{default:s(()=>[...e[11]||(e[11]=[d("mdi-fire",-1)])]),_:1}),d(" "+n(D(t.completedDates))+" hari streak ",1)])])]),l("div",fe,[l("div",null,[l("div",pe,n(w(t))+"% ",1),e[12]||(e[12]=l("div",null,"Tingkat Penyelesaian",-1))]),l("div",be,[l("div",ve,n(D(t.completedDates))+" hari ",1),e[13]||(e[13]=l("div",null,"Streak Saat Ini",-1))])]),a(b,{block:"",height:"48",rounded:"lg",variant:"flat",color:c(t)?"success":"primary",disabled:c(t),onClick:r=>U(t),class:"mt-auto"},{default:s(()=>[a(f,{class:"mr-2"},{default:s(()=>[d(n(c(t)?"mdi-check":"mdi-plus"),1)]),_:2},1024),d(" "+n(c(t)?"Selesai Hari Ini!":`+${t.xp} XP`),1)]),_:2},1032,["color","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128)),V(u).habits.length===0?(y(),_(g,{key:0,cols:"12"},{default:s(()=>[a(x,{class:"ocean-card pa-12 text-center bg-surface-soft",elevation:"0"},{default:s(()=>[a(f,{size:"80",color:"medium-emphasis",class:"mb-4"},{default:s(()=>[...e[14]||(e[14]=[d("mdi-target",-1)])]),_:1}),e[16]||(e[16]=l("h3",{class:"text-h6 font-weight-bold mb-2 text-on-surface"}," Belum Ada Kebiasaan ",-1)),e[17]||(e[17]=l("p",{class:"text-body-2 text-medium-emphasis mb-6"}," Mulai bangun kebiasaan baru untuk meningkatkan produktivitas Anda ",-1)),a(b,{color:"primary","prepend-icon":"mdi-plus",rounded:"lg",elevation:"2",onClick:e[1]||(e[1]=t=>m.value=!0)},{default:s(()=>[...e[15]||(e[15]=[d(" Buat Kebiasaan Pertama ",-1)])]),_:1})]),_:1})]),_:1})):J("",!0)]),_:1})]),_:1}),a(g,{cols:"12",lg:"4"},{default:s(()=>[a(x,{class:"ocean-card pa-6 mb-4 bg-surface-soft",elevation:"0"},{default:s(()=>[e[20]||(e[20]=l("h3",{class:"text-h6 font-weight-bold mb-4"},"Statistik Kebiasaan",-1)),l("div",xe,[l("div",ge,[e[18]||(e[18]=l("span",{class:"text-body-2 text-medium-emphasis"},"Total Kebiasaan",-1)),l("span",Ve,n(V(u).habits.length),1)]),a(z),l("div",ye,[e[19]||(e[19]=l("span",{class:"text-body-2 text-medium-emphasis"},"Selesai Hari Ini",-1)),l("span",we,n(V(u).habits.filter(c).length),1)])])]),_:1})]),_:1})]),_:1}),a(X,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=t=>m.value=t),"max-width":"500"},{default:s(()=>[a(x,{class:"ocean-card pa-4"},{default:s(()=>[a(N,{class:"text-h5 font-weight-bold mb-4"},{default:s(()=>[...e[21]||(e[21]=[d(" Kebiasaan Baru ",-1)])]),_:1}),a($,null,{default:s(()=>[a(h,{modelValue:i.value.title,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.title=t),label:"Nama Kebiasaan",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(W,{modelValue:i.value.description,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.description=t),label:"Deskripsi (Opsional)",variant:"outlined",rows:"3",class:"mb-2"},null,8,["modelValue"]),a(h,{modelValue:i.value.xp,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.xp=t),modelModifiers:{number:!0},label:"Nilai XP",type:"number",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(B,{modelValue:i.value.frequency,"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.frequency=t),items:K,label:"Frekuensi",variant:"outlined",density:"comfortable",class:"mb-2"},null,8,["modelValue"]),a(B,{modelValue:i.value.icon,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.icon=t),items:A,label:"Ikon",variant:"outlined",density:"comfortable"},{selection:s(({item:t})=>[a(f,{icon:t.value,class:"mr-2"},null,8,["icon"]),l("span",null,n(t.value),1)]),item:s(({item:t,props:r})=>[a(F,ee(te(r)),{prepend:s(()=>[a(f,{icon:t.value},null,8,["icon"])]),_:2},1040)]),_:1},8,["modelValue"])]),_:1}),a(L,null,{default:s(()=>[a(R),a(b,{variant:"text",onClick:e[7]||(e[7]=t=>m.value=!1)},{default:s(()=>[...e[22]||(e[22]=[d("Batal",-1)])]),_:1}),a(b,{color:"primary",variant:"flat",onClick:I},{default:s(()=>[...e[23]||(e[23]=[d(" Buat Kebiasaan ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ue=P(ke,[["__scopeId","data-v-c71a20b7"]]);export{Ue as default};
