import{H as B,d as p,c as V,u as P,_ as D,k as L,a as I,b as o,h as s,w as u,l as F,f,t as h,m as i,F as N,r as U,i as M,o as z}from"./index-BO5ot4Aw.js";import{u as H}from"./todoStore-uEZ3XYxQ.js";const K=B("focus",()=>{const r=p(1500),e=p(!1),d=p("focus"),m=p(null),c=p(0);let v=null;const b=V(()=>{const a=Math.floor(r.value/60),C=r.value%60;return`${a.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`}),S=V(()=>{const a=d.value==="focus"?1500:d.value==="short-break"?300:900;return(a-r.value)/a*100});function k(a){switch(d.value=a,e.value=!1,clearInterval(v),a){case"focus":r.value=25*60;break;case"short-break":r.value=5*60;break;case"long-break":r.value=15*60;break}}function x(){e.value?n():w()}function w(){e.value||(e.value=!0,v=setInterval(()=>{r.value>0?r.value--:g()},1e3))}function n(){e.value=!1,clearInterval(v)}function l(){n(),k(d.value)}function g(){if(n(),d.value==="focus"){c.value++;const a=P();a.addXP(50),a.showNotification("Sesi Fokus Selesai! Istirahatlah sejenak.")}else P().showNotification("Istirahat Selesai! Kembali bekerja?")}function y(a){m.value=a}function _(){return{totalSessions:c.value}}function T(a){a&&a.totalSessions&&(c.value=a.totalSessions)}return{timeLeft:r,isActive:e,mode:d,selectedTaskId:m,totalSessions:c,formattedTime:b,progress:S,setMode:k,toggleTimer:x,resetTimer:l,selectTask:y,getUserData:_,loadUserData:T}},{persist:{paths:["mode","selectedTaskId","totalSessions"]}}),R={class:"view-container h-100 d-flex flex-column"},E={class:"d-flex justify-space-between align-center mb-6"},X={class:"d-flex gap-2 mb-8 z-10"},q={class:"timer-container mb-8 z-10"},G={class:"text-center"},J={class:"text-display-2 font-weight-black tracking-tight"},O={class:"text-body-1 font-weight-medium text-medium-emphasis mt-2"},Q={class:"d-flex gap-4 z-10"},W={class:"d-flex align-center mb-2"},Y={class:"d-flex align-center mb-2"},Z={class:"d-flex gap-2"},ee={__name:"FocusView",setup(r){const e=K(),d=H(),m=p(null),c=p(null),v=p(null),b=[{label:"Fokus",value:"focus"},{label:"Istirahat Pendek",value:"short-break"},{label:"Istirahat Panjang",value:"long-break"}],S=[{id:"rain",label:"Hujan",icon:"mdi-weather-pouring"},{id:"cafe",label:"Kafe",icon:"mdi-coffee"}],k=V(()=>{if(!e.selectedTaskId)return null;const n=d.tasks.find(l=>l.id===e.selectedTaskId);return n?n.title:null}),x=n=>{m.value.pause(),c.value.pause(),v.value===n?v.value=null:(v.value=n,n==="rain"&&m.value.play(),n==="cafe"&&c.value.play())},w=()=>{e.resetTimer()};return L(()=>{m.value&&m.value.pause(),c.value&&c.value.pause()}),(n,l)=>{const g=f("v-icon"),y=f("v-chip"),_=f("v-btn"),T=f("v-progress-circular"),a=f("v-card"),C=f("v-select"),j=f("v-col"),$=f("v-row");return z(),I("div",R,[o("div",E,[l[1]||(l[1]=o("h2",{class:"text-h4 font-weight-bold"},"Mode Fokus",-1)),s(y,{color:"primary",variant:"flat",class:"font-weight-bold"},{default:u(()=>[s(g,{start:"",icon:"mdi-fire"}),F(" "+h(i(e).totalSessions)+" Sesi Selesai ",1)]),_:1})]),s(a,{class:M(["ocean-card flex-grow-1 d-flex flex-column align-center justify-center relative overflow-hidden pa-6 mb-6",{"pulse-bg":i(e).isActive}])},{default:u(()=>[l[2]||(l[2]=o("div",{class:"absolute-bg-circle"},null,-1)),o("div",X,[(z(),I(N,null,U(b,t=>s(_,{key:t.value,variant:i(e).mode===t.value?"flat":"text",color:i(e).mode===t.value?"primary":"medium-emphasis",rounded:"pill",onClick:A=>i(e).setMode(t.value)},{default:u(()=>[F(h(t.label),1)]),_:2},1032,["variant","color","onClick"])),64))]),o("div",q,[s(T,{"model-value":i(e).progress,size:280,width:12,color:"primary","bg-color":"rgba(var(--v-theme-primary), 0.1)",class:"drop-shadow-lg"},{default:u(()=>[o("div",G,[o("div",J,h(i(e).formattedTime),1),o("div",O,h(k.value||"Pilih tugas untuk fokus"),1)])]),_:1},8,["model-value"])]),o("div",Q,[s(_,{icon:"mdi-refresh",variant:"tonal",color:"medium-emphasis",size:"large",onClick:i(e).resetTimer},null,8,["onClick"]),s(_,{icon:i(e).isActive?"mdi-pause":"mdi-play",color:"primary",size:"x-large",elevation:"4",class:"play-btn",onClick:i(e).toggleTimer},null,8,["icon","onClick"]),s(_,{icon:"mdi-skip-next",variant:"tonal",color:"medium-emphasis",size:"large",onClick:w})])]),_:1},8,["class"]),s($,null,{default:u(()=>[s(j,{cols:"12",md:"6"},{default:u(()=>[s(a,{class:"ocean-card pa-4 h-100"},{default:u(()=>[o("div",W,[s(g,{icon:"mdi-checkbox-marked-circle-outline",class:"mr-2",color:"primary"}),l[3]||(l[3]=o("span",{class:"font-weight-bold"},"Fokus Pada",-1))]),s(C,{modelValue:i(e).selectedTaskId,"onUpdate:modelValue":l[0]||(l[0]=t=>i(e).selectedTaskId=t),items:i(d).tasks.filter(t=>!t.completed),"item-title":"title","item-value":"id",label:"Pilih Tugas",variant:"outlined",density:"comfortable","hide-details":"",placeholder:"Tanpa tugas spesifik",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(j,{cols:"12",md:"6"},{default:u(()=>[s(a,{class:"ocean-card pa-4 h-100"},{default:u(()=>[o("div",Y,[s(g,{icon:"mdi-headphones",class:"mr-2",color:"secondary"}),l[4]||(l[4]=o("span",{class:"font-weight-bold"},"Suara Latar",-1))]),o("div",Z,[(z(),I(N,null,U(S,t=>s(_,{key:t.id,variant:v.value===t.id?"flat":"outlined",color:v.value===t.id?"secondary":"medium-emphasis",class:"flex-grow-1",onClick:A=>x(t.id)},{default:u(()=>[s(g,{icon:t.icon,class:"mr-1"},null,8,["icon"]),F(" "+h(t.label),1)]),_:2},1032,["variant","color","onClick"])),64))])]),_:1})]),_:1})]),_:1}),o("audio",{ref_key:"audioRain",ref:m,loop:"",src:"https://actions.google.com/sounds/v1/weather/rain_heavy_loud.ogg"},null,512),o("audio",{ref_key:"audioCafe",ref:c,loop:"",src:"https://actions.google.com/sounds/v1/ambiences/coffee_shop.ogg"},null,512)])}}},te=D(ee,[["__scopeId","data-v-53e2987a"]]);export{te as default};
