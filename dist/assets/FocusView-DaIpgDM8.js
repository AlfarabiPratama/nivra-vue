import{O as $,r as v,m as I,u as F,_ as A,aH as D,e as T,d as l,b as s,a as u,h as w,g as k,t as p,s as i,F as z,f as P,q as L,i as g,n as M,V,o as C}from"./index-CaWm9mxH.js";import{u as R}from"./todoStore-Do1tipFr.js";import{V as H}from"./VChip-DarLv345.js";import{V as j,a as K}from"./VRow-DBbWNSlZ.js";import{V as q}from"./VSelect-ybdDrsdq.js";import"./VTextField-ngYOOfdz.js";import"./forwardRefs-Bi__BXdB.js";import"./dialog-transition-B-yByMG-.js";const E=$("focus",()=>{const r=v(1500),e=v(!1),d=v("focus"),m=v(null),c=v(0);let f=null;const b=I(()=>{const t=Math.floor(r.value/60),B=r.value%60;return`${t.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`}),_=I(()=>{const t=d.value==="focus"?1500:d.value==="short-break"?300:900;return(t-r.value)/t*100});function h(t){switch(d.value=t,e.value=!1,clearInterval(f),t){case"focus":r.value=25*60;break;case"short-break":r.value=5*60;break;case"long-break":r.value=15*60;break}}function S(){e.value?n():x()}function x(){e.value||(e.value=!0,f=setInterval(()=>{r.value>0?r.value--:a()},1e3))}function n(){e.value=!1,clearInterval(f)}function o(){n(),h(d.value)}function a(){if(n(),d.value==="focus"){c.value++;const t=F();t.addXP(50),t.showNotification("Sesi Fokus Selesai! Istirahatlah sejenak.")}else F().showNotification("Istirahat Selesai! Kembali bekerja?")}function y(t){m.value=t}function N(){return{totalSessions:c.value}}function U(t){t&&t.totalSessions&&(c.value=t.totalSessions)}return{timeLeft:r,isActive:e,mode:d,selectedTaskId:m,totalSessions:c,formattedTime:b,progress:_,setMode:h,toggleTimer:S,resetTimer:o,selectTask:y,getUserData:N,loadUserData:U}},{persist:{paths:["mode","selectedTaskId","totalSessions"]}}),O={class:"view-container h-100 d-flex flex-column"},X={class:"d-flex justify-space-between align-center mb-6"},G={class:"d-flex gap-2 mb-8 z-10"},J={class:"timer-container mb-8 z-10"},Q={class:"text-center"},W={class:"text-display-2 font-weight-black tracking-tight"},Y={class:"text-body-1 font-weight-medium text-medium-emphasis mt-2"},Z={class:"d-flex gap-4 z-10"},ee={class:"d-flex align-center mb-2"},ae={class:"d-flex align-center mb-2"},se={class:"d-flex gap-2"},te={__name:"FocusView",setup(r){const e=E(),d=R(),m=v(null),c=v(null),f=v(null),b=[{label:"Fokus",value:"focus"},{label:"Istirahat Pendek",value:"short-break"},{label:"Istirahat Panjang",value:"long-break"}],_=[{id:"rain",label:"Hujan",icon:"mdi-weather-pouring"},{id:"cafe",label:"Kafe",icon:"mdi-coffee"}],h=I(()=>{if(!e.selectedTaskId)return null;const n=d.tasks.find(o=>o.id===e.selectedTaskId);return n?n.title:null}),S=n=>{m.value.pause(),c.value.pause(),f.value===n?f.value=null:(f.value=n,n==="rain"&&m.value.play(),n==="cafe"&&c.value.play())},x=()=>{e.resetTimer()};return D(()=>{m.value&&m.value.pause(),c.value&&c.value.pause()}),(n,o)=>(C(),T("div",O,[l("div",X,[o[1]||(o[1]=l("h2",{class:"text-h4 font-weight-bold"},"Mode Fokus",-1)),s(H,{color:"primary",variant:"flat",class:"font-weight-bold"},{default:u(()=>[s(k,{start:"",icon:"mdi-fire"}),w(" "+p(i(e).totalSessions)+" Sesi Selesai ",1)]),_:1})]),s(V,{class:M(["ocean-card flex-grow-1 d-flex flex-column align-center justify-center relative overflow-hidden pa-6 mb-6",{"pulse-bg":i(e).isActive}])},{default:u(()=>[o[2]||(o[2]=l("div",{class:"absolute-bg-circle"},null,-1)),l("div",G,[(C(),T(z,null,P(b,a=>s(g,{key:a.value,variant:i(e).mode===a.value?"flat":"text",color:i(e).mode===a.value?"primary":"medium-emphasis",rounded:"pill",onClick:y=>i(e).setMode(a.value)},{default:u(()=>[w(p(a.label),1)]),_:2},1032,["variant","color","onClick"])),64))]),l("div",J,[s(L,{"model-value":i(e).progress,size:280,width:12,color:"primary","bg-color":"rgba(var(--v-theme-primary), 0.1)",class:"drop-shadow-lg"},{default:u(()=>[l("div",Q,[l("div",W,p(i(e).formattedTime),1),l("div",Y,p(h.value||"Pilih tugas untuk fokus"),1)])]),_:1},8,["model-value"])]),l("div",Z,[s(g,{icon:"mdi-refresh",variant:"tonal",color:"medium-emphasis",size:"large",onClick:i(e).resetTimer},null,8,["onClick"]),s(g,{icon:i(e).isActive?"mdi-pause":"mdi-play",color:"primary",size:"x-large",elevation:"4",class:"play-btn",onClick:i(e).toggleTimer},null,8,["icon","onClick"]),s(g,{icon:"mdi-skip-next",variant:"tonal",color:"medium-emphasis",size:"large",onClick:x})])]),_:1},8,["class"]),s(K,null,{default:u(()=>[s(j,{cols:"12",md:"6"},{default:u(()=>[s(V,{class:"ocean-card pa-4 h-100"},{default:u(()=>[l("div",ee,[s(k,{icon:"mdi-checkbox-marked-circle-outline",class:"mr-2",color:"primary"}),o[3]||(o[3]=l("span",{class:"font-weight-bold"},"Fokus Pada",-1))]),s(q,{modelValue:i(e).selectedTaskId,"onUpdate:modelValue":o[0]||(o[0]=a=>i(e).selectedTaskId=a),items:i(d).tasks.filter(a=>!a.completed),"item-title":"title","item-value":"id",label:"Pilih Tugas",variant:"outlined",density:"comfortable","hide-details":"",placeholder:"Tanpa tugas spesifik",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(j,{cols:"12",md:"6"},{default:u(()=>[s(V,{class:"ocean-card pa-4 h-100"},{default:u(()=>[l("div",ae,[s(k,{icon:"mdi-headphones",class:"mr-2",color:"secondary"}),o[4]||(o[4]=l("span",{class:"font-weight-bold"},"Suara Latar",-1))]),l("div",se,[(C(),T(z,null,P(_,a=>s(g,{key:a.id,variant:f.value===a.id?"flat":"outlined",color:f.value===a.id?"secondary":"medium-emphasis",class:"flex-grow-1",onClick:y=>S(a.id)},{default:u(()=>[s(k,{icon:a.icon,class:"mr-1"},null,8,["icon"]),w(" "+p(a.label),1)]),_:2},1032,["variant","color","onClick"])),64))])]),_:1})]),_:1})]),_:1}),l("audio",{ref_key:"audioRain",ref:m,loop:"",src:"https://actions.google.com/sounds/v1/weather/rain_heavy_loud.ogg"},null,512),l("audio",{ref_key:"audioCafe",ref:c,loop:"",src:"https://actions.google.com/sounds/v1/ambiences/coffee_shop.ogg"},null,512)]))}},fe=A(te,[["__scopeId","data-v-53e2987a"]]);export{fe as default};
